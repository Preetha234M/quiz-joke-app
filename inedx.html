<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Stylish Quiz & Joke App</title>
<link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary:#6a11cb;
  --secondary:#2575fc;
  --bg-light:#f0f4f8;
  --bg-dark:#1c1c1c;
  --text-light:#333;
  --text-dark:#eee;
}

body{
  font-family:'Comfortaa', cursive;
  margin:0; padding:0;
  background:linear-gradient(120deg,#f0f4f8,#d9e6f2);
  transition:0.3s;
}
body.dark{
  background:linear-gradient(120deg,#1c1c1c,#333);
  color:var(--text-dark);
}

.container{
  max-width:650px;
  margin:50px auto;
  padding:25px;
  border-radius:20px;
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(12px);
  box-shadow:0 8px 30px rgba(0,0,0,0.1);
  transition:0.3s;
}
body.dark .container{
  background:rgba(20,20,20,0.25);
}

h2{
  text-align:center;
  margin-bottom:20px;
  font-weight:700;
  color:var(--primary);
}

.section{ display:none; opacity:0; transition:all 0.5s ease; transform:translateX(50px);}
.active{ display:block; opacity:1; transform:translateX(0); }

.options button{
  display:block; width:100%; margin:10px 0; padding:12px;
  border:none; border-radius:15px;
  background:linear-gradient(45deg,var(--primary),var(--secondary));
  color:white; font-weight:600; cursor:pointer;
  transition:0.3s;
}
.options button:hover{
  transform:scale(1.05) rotate(-1deg);
  box-shadow:0 8px 15px rgba(0,0,0,0.2);
}

button.nav-btn{
  background:linear-gradient(45deg,#ff512f,#dd2476);
  color:white; padding:10px 15px; border:none; border-radius:12px;
  margin:5px; cursor:pointer; font-weight:600;
  transition:0.3s;
}
button.nav-btn:hover{
  transform:scale(1.05) rotate(2deg);
  box-shadow:0 6px 12px rgba(0,0,0,0.25);
}

.theme-toggle{
  position:fixed; top:10px; right:10px;
  padding:8px 16px; border:none; border-radius:10px;
  background:linear-gradient(45deg,#6a11cb,#2575fc); color:white;
  cursor:pointer; font-weight:700;
  transition:0.3s;
}

#timer{
  text-align:center; font-weight:700;
  font-size:1.2em; margin-bottom:15px;
}

#progress-bar-container{
  width:100%; height:14px; background:rgba(255,255,255,0.2); border-radius:10px; margin-bottom:20px;
}
#progress-bar{
  width:0%; height:100%; background:linear-gradient(90deg,#6a11cb,#2575fc);
  border-radius:10px; transition:width 0.5s ease;
}

.review-item{
  background:rgba(255,255,255,0.15); padding:12px; border-radius:15px; margin-bottom:10px;
  backdrop-filter:blur(8px);
}
body.dark .review-item{
  background:rgba(30,30,30,0.25);
}

#joke{
  margin-top:15px; padding:15px;
  border-radius:15px; background:rgba(255,255,255,0.2);
  font-style:italic; backdrop-filter:blur(6px);
  min-height:60px; display:flex; align-items:center; justify-content:center;
  text-align:center;
}

@media(max-width:480px){
  .container{ margin:20px; padding:18px;}
  .options button, button.nav-btn{ font-size:0.9em; padding:10px;}
}
</style>
</head>
<body>

<button class="theme-toggle" onclick="toggleTheme()">ðŸŒ™ Toggle</button>

<div class="container">
  <h2>Quiz & Joke App</h2>

  <div style="text-align:center; margin-bottom:20px;">
    <button class="nav-btn" onclick="showSection('quizSection')">Quiz</button>
    <button class="nav-btn" onclick="showSection('jokeSection')">Jokes ðŸ˜‚</button>
  </div>

  <!-- Quiz Section -->
  <div id="quizSection" class="section active">
    <div id="timer">Time: 30s</div>
    <div id="progress-bar-container"><div id="progress-bar"></div></div>

    <div id="quiz">
      <div class="question" id="question"></div>
      <div class="options" id="options"></div>
    </div>

    <div id="result" style="display:none;">
      <h3>Your Score: <span id="score"></span></h3>
      <button class="nav-btn" onclick="reviewAnswers()">Review Answers</button>
      <button class="nav-btn" onclick="restartQuiz()">Restart Quiz</button>
    </div>

    <div class="review" id="review"></div>
  </div>

  <!-- Joke Section -->
  <div id="jokeSection" class="section">
    <button class="nav-btn" onclick="getJoke()">ðŸ˜‚ Get a Joke</button>
    <div id="joke"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<script>
const quizData=[
  {q:"Which language runs in a web browser?",options:["Java","C","Python","JavaScript"],correct:"JavaScript"},
  {q:"What does CSS stand for?",options:["Cascading Style Sheets","Central Style Syntax","Colorful Style System"],correct:"Cascading Style Sheets"},
  {q:"What does HTML stand for?",options:["HyperText Markup Language","HighText Machine Language","HyperLoop Markup Language"],correct:"HyperText Markup Language"}
];

let currentQ=0,score=0,userAnswers=[],timer,timeLeft=30;

const questionEl=document.getElementById("question"), optionsEl=document.getElementById("options"),
resultEl=document.getElementById("result"), scoreEl=document.getElementById("score"),
reviewEl=document.getElementById("review"), timerEl=document.getElementById("timer"),
progressBar=document.getElementById("progress-bar"), quizSection=document.getElementById("quizSection"),
jokeSection=document.getElementById("jokeSection"), jokeEl=document.getElementById("joke");

function startTimer(){ timeLeft=30; timerEl.innerText=`Time: ${timeLeft}s`; clearInterval(timer);
  timer=setInterval(()=>{ timeLeft--; timerEl.innerText=`Time: ${timeLeft}s`; if(timeLeft===0){ clearInterval(timer); showResult(); } },1000);
}

function loadQuestion(){ startTimer(); updateProgress(); let q=quizData[currentQ]; questionEl.innerText=q.q; optionsEl.innerHTML="";
  q.options.forEach(opt=>{ const btn=document.createElement("button"); btn.innerText=opt; btn.onclick=()=>selectAnswer(opt); optionsEl.appendChild(btn); });
}

function updateProgress(){ let percent=((currentQ+1)/quizData.length)*100; progressBar.style.width=percent+"%"; }
function selectAnswer(answer){ userAnswers[currentQ]=answer; if(answer===quizData[currentQ].correct) score++; nextQuestion(); }
function nextQuestion(){ clearInterval(timer); currentQ++; if(currentQ<quizData.length) loadQuestion(); else showResult(); }

function showResult(){ clearInterval(timer); document.getElementById("quiz").style.display="none"; resultEl.style.display="block"; scoreEl.innerText=`${score} / ${quizData.length}`;
  const percentage=(score/quizData.length)*100;
  if(percentage===100){ confetti({particleCount:300,spread:100,origin:{y:0.6}});}
  else if(percentage>=50){ confetti({particleCount:100,spread:50,origin:{y:0.6}});}
}

function reviewAnswers(){ reviewEl.innerHTML=""; quizData.forEach((q,index)=>{ const div=document.createElement("div"); div.classList.add("review-item");
  div.innerHTML=`<strong>Q${index+1}: ${q.q}</strong><br>Your Answer: ${userAnswers[index] || "Not Answered"}<br>Correct Answer: ${q.correct}`; reviewEl.appendChild(div); });
}

function restartQuiz(){ currentQ=0; score=0; userAnswers=[]; resultEl.style.display="none"; document.getElementById("quiz").style.display="block"; loadQuestion(); }

function toggleTheme(){ document.body.classList.toggle("dark"); }

function showSection(sectionId){
  if(sectionId==="quizSection"){ quizSection.classList.add("active"); jokeSection.classList.remove("active"); }
  else{ jokeSection.classList.add("active"); quizSection.classList.remove("active"); }
}

// Joke API
async function getJoke(){ jokeEl.innerText="Loading joke..."; try{
  let res=await fetch("https://official-joke-api.appspot.com/random_joke"); let data=await res.json();
  jokeEl.innerHTML=`"${data.setup}"<br><strong>${data.punchline}</strong>`;
} catch(err){ jokeEl.innerText="Couldn't fetch a joke ðŸ˜¢"; }}

// Load first quiz question
loadQuestion();
</script>
</body>
</html>
